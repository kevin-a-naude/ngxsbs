server {
    server_name www.example.com;

    access_log example.com.access.log AccessFormat;
    error_log  example.com.error.log  ErrorFormat;

    # USER SECTION FOLLOWS

    root /home/john/www/example.com/;
    return 301 $scheme://example.com$request_uri;

    # USER SECTION ENDS
}

server {
    server_name example.com *.example.com;

    root /home/john/host/example.com/;

    access_log example.com.access.log AccessFormat;
    error_log  example.com.error.log  ErrorFormat;

    location = /favicon.ico {
        access_log off;
        log_not_found off;
    }

    # USER SECTION FOLLOWS

    location / { }

    # USER SECTION ENDS
}
